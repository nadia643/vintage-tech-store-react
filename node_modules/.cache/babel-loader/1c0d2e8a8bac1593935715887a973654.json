{"ast":null,"code":"var _jsxFileName = \"/home/nadia/Projects/React Udemy Course/vintage-tech-store-react/src/context/cart.js\";\n// cart context\nimport React, { useState, createContext, useEffect } from \"react\";\nimport localCart from \"../utils/localCart\";\nconst CartContext = createContext();\n\nfunction CartProvider({\n  children\n}) {\n  const [cart, setCart] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [cartItems, setCartItems] = useState(0);\n  useEffect(() => {\n    // local storage\n    localStorage.setItem('cart'); // cart items\n\n    let newCartItems = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount;\n    }, 0);\n    setCartItems(newCartItems); // cart total\n\n    let newTotal = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount * cartItem.price;\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setTotal(newTotal);\n  }, [cart]); // remove item\n\n  const removeItem = id => {\n    let newCart = [...cart].filter(item => item.id !== id);\n    setCart(newCart);\n  }; // increase amount\n\n\n  const increaseAmount = id => {\n    const newCart = [...cart].map(item => {\n      return item.id === id ? { ...item,\n        amount: item.amount + 1\n      } : { ...item\n      };\n    });\n    setCart(newCart);\n  }; // decrease amount\n\n\n  const decreaseAmount = (id, amount) => {\n    if (amount === 1) {\n      removeItem(id);\n      return;\n    } else {\n      const newCart = [...cart].map(item => {\n        return item.id === id ? { ...item,\n          amount: item.amount - 1\n        } : { ...item\n        };\n      });\n      setCart(newCart);\n    }\n  }; // add to cart\n\n\n  const addToCart = product => {\n    const {\n      id,\n      image: {\n        url\n      },\n      title,\n      price\n    } = product;\n    const item = [...cart].find(item => item.id === id);\n\n    if (item) {\n      increaseAmount(id);\n      return;\n    } else {\n      const newItem = {\n        id,\n        image: url,\n        title,\n        price,\n        amount: 1\n      };\n      const newCart = [...cart, newItem];\n      setCart(newCart);\n    }\n  }; // clear cart\n\n\n  const clearCart = () => {};\n\n  return /*#__PURE__*/React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      total,\n      cartItems,\n      removeItem,\n      increaseAmount,\n      decreaseAmount,\n      addToCart,\n      clearCart\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }\n  }, children);\n}\n\nexport { CartContext, CartProvider };","map":{"version":3,"sources":["/home/nadia/Projects/React Udemy Course/vintage-tech-store-react/src/context/cart.js"],"names":["React","useState","createContext","useEffect","localCart","CartContext","CartProvider","children","cart","setCart","total","setTotal","cartItems","setCartItems","localStorage","setItem","newCartItems","reduce","cartItem","amount","newTotal","price","parseFloat","toFixed","removeItem","id","newCart","filter","item","increaseAmount","map","decreaseAmount","addToCart","product","image","url","title","find","newItem","clearCart"],"mappings":"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","sourcesContent":["// cart context\nimport React, { useState, createContext, useEffect } from \"react\";\nimport localCart from \"../utils/localCart\";\n\n\n\nconst CartContext = createContext();\n\nfunction CartProvider({ children }) {\n    const [cart, setCart] = useState([]);\n    const [total, setTotal] = useState(0);\n    const [cartItems, setCartItems] = useState(0);\n\n    useEffect(() => {\n        // local storage\n        localStorage.setItem('cart')\n        // cart items\n        let newCartItems = cart.reduce((total, cartItem) => {\n            \n            return (total += cartItem.amount);\n        }, 0)\n        setCartItems(newCartItems);\n        // cart total\n        let newTotal = cart.reduce((total, cartItem) => {\n            return total += (cartItem.amount * cartItem.price);\n        }, 0)\n        newTotal = parseFloat(newTotal.toFixed(2));\n        setTotal(newTotal);\n    }, [cart])\n    \n\n    // remove item\n    const removeItem = (id) => {\n        let newCart = [...cart].filter(item => item.id !== id);\n        setCart(newCart)\n    };\n    // increase amount\n    const increaseAmount = (id) => {\n        const newCart = [...cart].map(item => {\n            return item.id === id \n            ? {...item, amount : item.amount + 1} \n            : {...item};\n        });\n        setCart(newCart);\n    };\n    // decrease amount\n    const decreaseAmount = (id, amount) => {\n        if(amount === 1) {\n            removeItem(id);\n            return;\n        }\n        else {\n            const newCart = [...cart].map(item => {\n                return item.id === id \n                ? {...item, amount : item.amount - 1} \n                : {...item};\n            });\n            setCart(newCart);\n        }\n    };\n    // add to cart\n    const addToCart = (product) => {        \n        const { \n            id, \n            image: { url }, \n            title, \n            price \n        } = product;\n        const item = [...cart].find(item => item.id === id);\n        if(item) {\n            increaseAmount(id);\n            return;\n        }\n        else {\n            const newItem = {id, image: url, title, price, amount: 1};\n            const newCart = [...cart, newItem];\n            setCart(newCart);\n        }\n    };\n    // clear cart\n    const clearCart = () => {};\n\n\n    return <CartContext.Provider \n        value={{ \n            cart, \n            total, \n            cartItems,\n            removeItem, \n            increaseAmount, \n            decreaseAmount, \n            addToCart, \n            clearCart\n            }}\n            >\n        { children }\n    </CartContext.Provider>\n}\n\nexport {CartContext, CartProvider};"]},"metadata":{},"sourceType":"module"}